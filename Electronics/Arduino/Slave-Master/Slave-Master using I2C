/*
Developer   - Nikhil Arun
Date        - 3-12-2025
Board       - Arduino Uno R3
*/

//TinkerCad Link: https://www.tinkercad.com/things/igaD5paykkH-servo-slave-with-i2c/editel?returnTo=https%3A%2F%2Fwww.tinkercad.com%2Fdashboard%2Fdesigns%2Fcircuits&sharecode=0QSXpRMFdFhaQbu6NOLI0z8TC5F9oN75Dg3m-LtRTnI

//Using potentiometer connected to the master arduino to control the servo-motor connected to the slave arduino employing the I2C method (using Wire.h)

//Master arduino code

#include <Wire.h>

int Potread=0;
void setup()
{
  pinMode(11, OUTPUT);
  Serial.begin(9600);
  Wire.begin();
}

void loop()
{
  Potread=analogRead(A0);
  int Potangle = map(Potread, 0, 1023, 0, 180);
  Wire.beginTransmission(8);
  Wire.write(Potangle);
  Wire.endTransmission();
  Serial.println(Potangle);
  delay(20);
}

//Slave arduino code

#include <Servo.h>
#include <Wire.h>

Servo Potserve;
int Potread=0;
void setup()
{
  Potserve.attach(11);
  Wire.begin(8);
  Wire.onRecieve(event);
  Serial.begin(9600);
}

void loop()
{
  Potserve.write(Potread);
  delay(20);

}
void event(int howMany){
  while (Wire.available()){
    Potread=Wire.read();
  }}
